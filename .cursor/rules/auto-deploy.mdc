---
description: Articles need user approval before deploying. Audio and other post-approval media auto-deploy.
alwaysApply: true
---

# Deployment Workflow

This is a static website hosted on Vercel. Deploying is low risk.

## Articles: Draft-First, Deploy on Approval

New articles must be **built locally as drafts** for the user to review before deploying.

After completing a new article (text, charts, hero image):

1. **Build the site** so the article is viewable locally with all charts and images:
   ```bash
   cd hfn-build-system && python3 build.py
   ```
2. **Do NOT deploy.** The article is a draft until the user has read it and approved.
3. **Tell the user** the article is ready to review and where to find the built HTML (e.g. `hfn-site-output/articles/{slug}.html`).

Only after the user explicitly approves (e.g. "deploy", "ship it", "looks good"):

```bash
./scripts/deploy.sh "feat: description of changes"
```

## Audio Narrations: Auto-Deploy

Audio narrations are generated **after** an article has been approved and deployed. Since the content is already approved, audio narrations should be **deployed immediately** without waiting for further approval.

After generating audio for an approved article:

```bash
./scripts/deploy.sh "feat: add audio narration for [article name]"
```

## Other Post-Approval Media: Auto-Deploy

Chart image fixes, thumbnail generation, and other media improvements to already-published articles should also auto-deploy without approval.

## Deploy Commands

The deploy script handles build, commit, push, and Vercel deploy:

```bash
./scripts/deploy.sh "feat: description of changes"
```

### Manual steps (if not using the script):

1. Run the build: `cd hfn-build-system && python3 build.py`
2. Stage all changes: `git add .`
3. Commit with a descriptive message
4. Push to main: `git push origin main`
5. Deploy to Vercel: `cd hfn-site-output && vercel --prod --yes`

## Important

- The domain `www.historyfuturenow.com` is served by **Vercel**, not GitHub Pages
- `git push` alone does NOT deploy to the live site â€” you MUST run `vercel --prod`
- The deploy script handles both git push and Vercel deploy

## After Deploying

- Verify the site loads at https://www.historyfuturenow.com
- The deploy script auto-logs to `~/.memory/daily/YYYY-MM-DD.md`
