#!/usr/bin/env python3
"""
Issue definitions for History Future Now.

Archive issues (1-12) use seasonal labels (Spring/Summer/Autumn/Winter YYYY).
Current issues (13+, from January 2026) are monthly.
"""


ISSUES = [
    {
        "number": 1,
        "date": "2012-03-01",
        "label": "Spring 2012",
        "articles": [
            "green-is-not-red-but-blue-environmentalism-and-the-mystery-of-right-wing-opposition",
            "the-north-african-threat-and-mediterranean-reunification",
            "keynes-and-hayek-are-both-dead-and-wrong",
            "the-immorality-of-climate-change-a-reflection-on-slavery-and-the-civil-war",
            "what-does-it-take-to-get-europeans-to-have-a-revolution",
        ],
    },
    {
        "number": 2,
        "date": "2012-06-01",
        "label": "Summer 2012",
        "articles": [
            "where-are-all-the-jobs-going-lessons-from-the-first-industrial-revolution-and-150-years-of-pain",
            "cassandra-time-to-give-up-on-predicting-climate-change",
            "why-do-we-need-the-military-securing-energy-supplies-and-trade-routes",
            "who-are-the-losers-in-the-energy-revolution",
            "why-the-nuclear-family-needs-to-die-in-order-for-us-to-live",
        ],
    },
    {
        "number": 3,
        "date": "2012-10-01",
        "label": "Autumn 2012",
        "articles": [
            "dont-confuse-what-is-legal-with-what-is-morally-right",
            "rome-vs-persia-and-the-transfer-of-strategic-technologies-to-china",
            "the-rise-of-the-west-was-based-on-luck-that-has-run-out",
            "roots-a-historical-understanding-of-climate-change-denial-creationism-and-slavery-1629-1775",
            "what-the-history-of-immigration-teaches-us-about-europes-future",
        ],
    },
    {
        "number": 4,
        "date": "2013-03-15",
        "label": "Spring 2013",
        "articles": [
            "why-is-bisexuality-becoming-mainstream",
            "emigration-colonies-of-the-mind-and-space",
            "crisis-or-an-explanation-on-the-origins-of-the-decline-of-the-west",
            "prisons-we-never-used-to-have-them-will-they-exist-in-the-future",
            "jobs-first-get-rid-of-expensive-westerners-second-get-rid-of-people-entirely",
        ],
    },
    {
        "number": 5,
        "date": "2013-08-01",
        "label": "Summer 2013",
        "articles": [
            "a-lost-generation-why-the-personal-story-of-the-beautiful-yulia-is-also-our-story",
            "a-frozen-society-the-long-term-implications-of-nsas-secrets",
            "why-buying-cheap-imported-products-is-more-expensive-for-individuals-and-not-just-society",
            "debt-jubilees-and-hyperinflation-why-history-shows-that-this-might-be-the-way-forward-for-us-all",
        ],
    },
    {
        "number": 6,
        "date": "2014-02-01",
        "label": "Winter 2014",
        "articles": [
            "are-europeans-fundamentally-racist",
            "what-happens-when-china-becomes-the-largest-economy-in-the-world",
            "why-land-deals-in-africa-could-make-the-great-irish-famine-a-minor-event",
            "is-democracy-the-opium-of-the-masses",
        ],
    },
    {
        "number": 7,
        "date": "2014-10-01",
        "label": "Autumn 2014",
        "articles": [
            "lets-talk-about-sex-does-the-separation-of-pleasure-and-procreation-mean-the-end-of-people",
            "china-has-many-of-the-characteristics-of-an-emerging-colonial-power-how-does-it-compare-historically",
            "why-god-needs-the-government-multiculturalism-vs-monotheism",
            "who-benefits-from-our-increased-social-fragmentation",
        ],
    },
    {
        "number": 8,
        "date": "2015-06-01",
        "label": "Summer 2015",
        "articles": [
            "establishing-a-price-floor-for-energy",
            "clash-of-titans-how-the-warrior-ethos-and-judeo-christian-monotheism-shaped-the-soul-of-the-west",
            "why-china-could-invade-taiwan-and-get-away-with-it",
            "dealing-with-the-consequences-of-climate-chance-inaction-the-impact-of-food",
        ],
    },
    {
        "number": 9,
        "date": "2016-09-01",
        "label": "Autumn 2016",
        "articles": [
            "hinkley-point-decision-is-really-about-china-and-brexit",
            "history-is-written-by-the-winners-and-europeans-are-losing",
            "the-renewables-and-battery-revolution",
            "big-european-electricity-utilities-are-facing-an-existential-crisis-how-did-this-happen-and-what-should-they-do",
        ],
    },
    {
        "number": 10,
        "date": "2019-01-15",
        "label": "Winter 2019",
        "articles": [
            "the-wests-romance-with-free-trade-is-over-why",
            "the-long-term-impact-of-covid-19",
            "the-unintended-consequences-of-war-how-the-loss-of-young-men-transformed-womens-roles-in-society-and-ushered-in-the-welfare-state",
            "the-great-emptying-how-collapsing-birth-rates-will-reshape-power-politics-and-people",
        ],
    },
    {
        "number": 11,
        "date": "2022-01-15",
        "label": "Winter 2022",
        "articles": [
            "vertical-farming-the-electrical-convergence-power-transport-and-agriculture",
            "forging-peace-from-centuries-of-war-to-ukraines-future",
            "the-war-in-ukraine-escalation-miscalculation-and-the-path-to-peace",
            "the-perils-of-prediction-lessons-from-history-on-navigating-an-uncertain-future",
        ],
    },
    {
        "number": 12,
        "date": "2024-03-01",
        "label": "Spring 2024",
        "articles": [
            "platform-technologies-how-foundational-technologies-of-the-past-show-us-the-foundational-technologies-of-the-future",
            "robotics-and-slavery",
            "the-paradox-of-mass-migration-and-robots-in-the-age-of-automation",
            "the-150-year-life-how-radical-longevity-will-transform-our-world",
        ],
    },
    {
        "number": 13,
        "date": "2026-01-23",
        "label": "January 2026",
        "articles": [
            "the-empty-cradle-bargain-why-your-decision-not-to-have-children-is-everyones-problem",
            "the-gates-of-nations-how-every-civilisation-in-history-controlled-immigration-until-the-west-stopped",
            "the-robot-bargain-how-ai-will-save-ageing-nations-from-the-immigration-trap",
            "the-silence-of-the-scribes-how-every-civilisation-that-controlled-speech-collapsed",
            "the-scramble-for-the-solar-system-why-the-next-colonial-race-has-already-begun",
            "who-guards-the-guards-bureaucracy-empire-and-the-eternal-struggle-to-control-the-state",
            "the-return-of-the-state-factory-why-nations-that-forgot-how-to-make-things-are-remembering",
            "the-death-of-the-fourth-estate-what-the-collapse-of-newspapers-means-for-democracy-power-and-truth",
            "europe-rearms-why-the-continent-that-invented-total-war-is-spending-800-billion-on-defence",
        ],
    },
    {
        "number": 14,
        "date": "2026-02-20",
        "label": "February 2026",
        "articles": [
            "the-builders-are-dying-how-the-populations-that-made-the-modern-world-are-disappearing",
            "the-new-literacy",
            "a-nation-transformed-britains-demographic-revolution-1948-2050",
            "the-great-offshoring-how-the-worlds-factory-moved-east",
            "the-elephant-awakens-why-indias-rise-will-reshape-the-world-more-than-chinas-did",
            "the-empty-throne-why-the-west-no-longer-believes-in-its-own-institutions",
            "the-last-drop-why-every-civilisation-that-ran-out-of-water-collapsed",
            "the-invisible-judge-why-guilt-and-shame-societies-are-incompatible",
            "when-the-servants-are-silicon-what-historys-leisure-classes-reveal-about-the-ai-age",
        ],
    },
    {
        "number": 15,
        "date": "2026-03-01",
        "label": "March 2026",
        "articles": [
            "the-new-oil-why-the-race-for-critical-minerals-will-define-the-21st-century",
            "the-young-continent-how-africas-billion-person-surge-will-reshape-the-global-order",
            "the-great-divergence-why-young-men-and-women-no-longer-see-the-same-world",
            "the-atom-returns-why-the-worlds-most-feared-energy-source-is-its-best-hope",
            "the-severed-circuit-how-the-us-china-tech-war-is-splitting-the-world-in-two",
            "the-debasement-why-every-great-power-that-borrowed-its-way-to-greatness-borrowed-its-way-to-ruin",
            "the-locked-gate-how-the-west-priced-its-children-out-of-existence",
        ],
    },
]


def get_issue_for_slug(slug):
    """Return the issue dict for a given article slug, or None."""
    for issue in ISSUES:
        if slug in issue["articles"]:
            return issue
    return None


def get_current_issue():
    """Return the most recent issue (highest number)."""
    return max(ISSUES, key=lambda i: i["number"])


def get_issue_by_number(num):
    """Return issue by its number, or None."""
    for issue in ISSUES:
        if issue["number"] == num:
            return issue
    return None


def build_slug_to_issue_map():
    """Return a dict mapping every article slug to its issue number."""
    mapping = {}
    for issue in ISSUES:
        for slug in issue["articles"]:
            mapping[slug] = issue["number"]
    return mapping
